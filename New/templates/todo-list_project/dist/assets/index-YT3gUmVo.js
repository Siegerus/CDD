(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function _(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(c){if(c.ep)return;c.ep=!0;const o=_(c);fetch(c.href,o)}})();window.addEventListener("DOMContentLoaded",()=>{S()});function S(){let d=document.forms[0],s=document.querySelector("ul"),_=document.querySelector(".todo__set"),n=!1;function c(){window.addEventListener("load",l=>{for(let e=0;e<localStorage.length;e++)g(l,localStorage.getItem(e))})}c();function o(l){l?s.previousElementSibling.textContent="List is empty...":s.previousElementSibling.textContent=""}o(!0);function f(l,e,t){n=!1,confirm(l,"")&&(Array.isArray(e)?(t||e.forEach(i=>{i.classList.contains("list__item_reject")||(i.remove(),localStorage.clear(),m(s.querySelectorAll(".list__text")))}),t&&e.forEach(i=>{i.classList.contains("list__item_done")&&(i.remove(),localStorage.clear(),m(s.querySelectorAll(".list__text")))})):e.remove(),s.parentElement.style.minHeight=0,s.children.length==0&&o(!0))}function p(l){let e=`
            <span class="list__text">${l}</span>  
            <div class="">
                <span class="check list__target" >✓</span>
                <span class="denied list__target" >✕</span> 
                <span class="reject list__target" >reject</span> 
            </div>`,t=document.createElement("li");return t.classList.add("list__item"),t.classList.add("target-item"),t.insertAdjacentHTML("afterBegin",e),o(!1),s.parentElement.style.minHeight=s.parentElement.offsetHeight+t.offsetHeight+"px",s.append(t),t}function m(l){l.forEach((e,t)=>localStorage.setItem(t,e.textContent))}function y(l,e){n=!0;let t=document.createElement("textarea");t.classList.add("list__edit"),l.insertAdjacentHTML("afterend",'<button type="button" class="button  list__edit-button">Edit</button>'),t.value=l.innerHTML,l.replaceWith(t),t.focus();let r=s.querySelectorAll("button");function i(){t.replaceWith(l),l.textContent=t.value,r.forEach(a=>{a.removeEventListener("click",u),a.remove(),n=!1})}function u(a){localStorage.setItem(a,t.value),i()}r&&r.forEach(a=>a.addEventListener("click",()=>u(e)))}function h(l){let e=l.querySelectorAll(".check"),t=l.querySelectorAll(".reject");l.classList.contains("list__item_done")?(l.classList.remove("list__item_reject"),e.forEach(r=>r.style.color="lightgreen"),t.forEach(r=>r.style.color="")):e.forEach(r=>r.style.color="")}function E(l){let e=l.querySelectorAll(".check"),t=l.querySelectorAll(".reject");l.classList.contains("list__item_reject")?(l.classList.remove("list__item_done"),t.forEach(r=>r.style.color="red"),e.forEach(r=>r.style.color="")):t.forEach(r=>r.style.color="")}function L(l,e,t){if(n)return;let r=l.target.closest(".list__target");if(r){if(r&&r.matches(".check")){if(e.classList.contains("list__item_reject"))return;e.classList.toggle("list__item_done"),h(e)}if(r&&r.matches(".reject")&&(e.classList.toggle("list__item_reject"),E(e)),r&&r.matches(".denied")){if(e.classList.contains("list__item_reject"))return;f("Delete this note?",e),localStorage.clear(),m(s.querySelectorAll(".list__text"))}}}function g(l,e){l.preventDefault(),e&&p(e);let t=document.querySelectorAll(".list__item"),r=document.querySelectorAll(".list__text");t.forEach((i,u)=>{i.onclick=a=>L(a,i)}),d.reset(),r.forEach((i,u)=>{localStorage.setItem(u,i.textContent),i.onclick=()=>{n||y(i,u)}})}function v(l){let e=l.target.closest(".button");if(e){if(e&&e.matches(".check-all")&&Array.from(s.children).forEach(t=>{t.classList.contains("list__item_reject")||(t.classList.add("list__item_done"),h(t))}),e&&e.matches(".remove-all")){let t=!0;for(let r of s.children)r.classList.contains("list__item_reject")||(t=!1);s.children.length>0&&!t&&f("Delete all notes?",Array.from(s.children))}if(e&&e.matches(".remove-all-checked")){let t=!0,r=!1;for(let i of s.children)i.classList.contains("list__item_done")&&(r=!0);r&&f("Delete all completed notes?",Array.from(s.children),t)}}}d.addEventListener("submit",l=>g(l,d.note.value)),_.addEventListener("click",v)}
